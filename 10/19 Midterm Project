var xPos = 400; // x position of the ball
var yPos = 10; // y position of the ball
var xVel = 5; // x velocity of the ball
var yVel = 5; // y velocity of the ball
var xTopRect = 400; // x position of the center of top board
var yTopRect = 590; // y position of the center of top board
var xBottomRect = 400; // x position of the center of bottom board
var yBottomRect = 0; // y position of the center of bottom board
var topBoard = 50; // half length of top board
var bottomBoard = 50; // half length of bottom board
var sec = second(); 


function setup(){
    createCanvas(800,600);
}

function draw(){
    background(220,255,220);
    // create and move the ball
    fill(0);
    ellipse(xPos,yPos,20,20);
    xPos+=xVel;
    yPos+=yVel;
    // create the tow board
    fill(0,0,255);
    rect(xBottomRect-topBoard,yBottomRect,2*topBoard,10);
    fill(255,0,0)
    rect(xTopRect-bottomBoard,yTopRect,2*bottomBoard,10);
    // two boards become shorter due to the time
    topBoard-=0.02;
    bottomBoard-=0.02;
    // bounce back
    if(xPos>width||xPos<0){ 
        xVel*=-1;
    }
    else if(yPos==yBottomRect&&onBottomBoard()||yPos==yTopRect&&onTopBoard()){  
        yVel*=-1;
    }
}

//test if ball sho9uld be bounce back by the bottom board
function onBottomBoard(){
    return (xPos<=xBottomRect+bottomBoard&&xPos>=xBottomRect-bottomBoard);
}

//test if ball sho9uld be bounce back by the top board
function onTopBoard(){
    return (xPos<=xTopRect+topBoard&&xPos>=xTopRect-topBoard);
}

// keyboard control system
function keyTyped(){
    if(key === 'a'){
        xTopRect-=40;
    } 
    else if(key === 'd'){
        xTopRect+=40;
    }
    else if(key === 'w'){
        yTopRect-=10;
    } 
    else if(key === 's'){
        yTopRect+=10;
    }
    else if(key === 'j'){
        xBottomRect-=40;
    } 
    else if(key === 'l'){
        xBottomRect+=40;
    }
    else if(key === 'i'){
        yBottomRect-=10;
    } 
    else if(key === 'k'){
        yBottomRect+=10;
    }
}
